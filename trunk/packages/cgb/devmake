#!/bin/bash
# ----------------------------------------------------------------------
# $Id: devmake,v 1.2 2004/05/03 16:35:59 sturm Exp $
# ----------------------------------------------------------------------
# Copyright (c) 1999 Andreas Dolzmann and Thomas Sturm
# ----------------------------------------------------------------------
# $Log: devmake,v $
# Revision 1.2  2004/05/03 16:35:59  sturm
# Switch from Solaris to Linux.
# Touching for CSL and deleting for PSL.
#
# Revision 1.1  1999/04/05 09:58:13  sturm
# Initial check-in. Derived from the corresponding redlog tools.
#
# ----------------------------------------------------------------------
umask 002
export NOREDUCERC=
unset RLDEFLANG
export reduce=/public/algebra/reduce/develop/devred
export MACHINE=linux
cd /public/algebra/reduce/develop/cgb
for a in *.red ; do
    echo "touching $a (for CSL)"
    touch $a
    binfile=`basename $a .red`.b
    echo "deleting $binfile (for PSL)"
    rm -f $reduce/lisp/psl/$MACHINE/red/$binfile
done
for a in cgb; do
	for lisp in csl psl ; do
		export lisp
		echo "compiling $a for $lisp"
		$reduce/util/mkpckge $a
		cp $reduce/log/cgb.blg $reduce/log/cgb.blg-$lisp
	done
done
for lisp in csl psl ; do
	export lisp
	echo "testing cgb for $lisp"
	$reduce/util/tstpckge cgb
	cp $reduce/log/cgb.rlg $reduce/log/cgb.rlg-$lisp
	grep "Time for test" $reduce/log/cgb.rlg-$lisp
done
